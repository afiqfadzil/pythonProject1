<WindowManager>:
    AddressScreen:
    MaintenanceWindow:
    PracticeWindow:
    TestWindow:
    TitleWindow:

    MainWindow:



    ResultWindow:



    ConnectionWindow:
    LoadingWindow:
    ExplanationWindow:




<MDLabel> :
    color: 1, 1, 1, 1
    font_name: "meiryo.ttc"


<MDTopAppBar>:
    title: "Locomotion Age Measurement"
    title_size : "20sp"
    title_font_name :"meiryo.ttc"
    size_hint: (1, 0.1)
    elevation: 10
    pos_hint : {"center_x" : 0.5 , "center_y" : 0.975}
<MDNavigationDrawer>:
    BoxLayout:
        orientation: 'horizontal'

<Overlay>:
    canvas:
        Color:
            rgba: 0, 0, 0, 0.5  # Adjust the alpha value (0.5 in this case) to control dim intensity
        Rectangle:
            pos: self.pos
            size:self.size



<Label>:
    font_name: "meiryo.ttc"
    color: 1, 1, 1, 1
    font_name: "meiryo.ttc"
    font_size : '20sp'







<MDTextField> :

    multiline : False
    size_hint_x : 0.3
    font_size :'20sp'
    font_name: "meiryo.ttc"
    font_name_helper_text : "meiryo.ttc"
    helper_text_mode : "on_focus"


<canvas.before>
    Color:
        rgba:(29/255,62/255,89/255,1)
    Rectangle:
        pos : self.pos
        size : self.size

<TextInput>:
    font_size : '20sp'


<MDFillRoundFlatButton>:
    size_hint : 0.1,0.035
    ripple_behaviour :True
    md_bg_color : 1,1,1,1
    theme_text_color: "Custom"
    text_color: "orange"
<MDRectangleFlatButton>:
    size_hint : 0.1,0.035
    ripple_behaviour :True

    md_bg_color : 1,1,1,1
    font_size :'18sp'
<MDRectangleFlatIconButton>:
    size_hint : 0.1,0.035
    ripple_behaviour :True
    md_bg_color : 1,1,1,1
    font_size :'18sp'


#Popup Section
#:import Factory kivy.factory.Factory
<LoadingPopup>
    auto_dismiss : False
    size_hint : 0.5, 0.15
    pos_hint: {"center_x" : 0.5 , "center_y": 0.5}
    title : "測定中、少々お待ちください"
    font_name: "meiryo.ttc"
    separator_color :  242/255 ,140/255,40/255,1
    title_align : "center"
<MovingPopup>
    auto_dismiss : False
    size_hint : 0.5 , 0.25
    pos_hint: {"center_x" : 0.5 , "center_y": 0.5}
    title : "注意"
    font_name: "meiryo.ttc"
    separator_color :  242/255 ,140/255,40/255,1
    title_align : "center"
    MDGridLayout:
        row_default_height :"50"
        rows:2
        cols: 1

        MDLabel :
            text : "椅子が動いてますので少々お待ちください。"
            font_size : self.height/7
            halign : "center"

        MDRectangleFlatButton:
            text : "閉じる"
            size_hint_x : 1
            halign : "center"
            on_release :
                root.dismiss()

<CautionPopup>
    auto_dismiss : False
    size_hint : 0.5, 0.15
    pos_hint: {"center_x" : 0.5 , "center_y": 0.5}
    title : "テスト終了しますか？"
    font_name: "meiryo.ttc"
    separator_color :  242/255 ,140/255,40/255,1
    title_align : "center"
    MDGridLayout:
        rows:1
        cols: 3
        padding : "20dp"
        MDRectangleFlatButton:
            text : "はい"
            font_size: " 12sp"
            size_hint : 1 , 0.5
            halign : "center"
            on_release :
                root.dismiss()
                root.btn()
        Widget:
        MDRectangleFlatButton:
            text : "いいえ"
            font_size: " 12sp"
            size_hint : 1 , 0.5
            halign : "center"
            on_release : root.dismiss()

<ShutdownPopup>
    auto_dismiss : False
    size_hint : 0.5, 0.15
    pos_hint: {"center_x" : 0.5 , "center_y": 0.5}


    title : "注意：シャットダウン良いですか"
    title_text_color: "red"
    font_name: "meiryo.ttc"
    separator_color :  242/255 ,140/255,40/255,1
    title_align : "center"
    MDGridLayout:
        rows:1
        cols: 3
        padding : "20dp"
        MDRectangleFlatButton:
            text : "はい"
            font_size: " 12sp"
            size_hint : 1 , 0.5
            halign : "center"
            on_release :
                root.dismiss()
                root.btn()
        Widget:
        MDRectangleFlatButton:
            text : "いいえ"
            font_size: " 12sp"
            size_hint : 1 , 0.5
            halign : "center"
            on_release : root.dismiss()
<PracticePopup>
    auto_dismiss : False
    size_hint : 0.5, 0.15
    pos_hint: {"center_x" : 0.5 , "center_y": 0.5}
    title : "練習終了しますか？"
    font_name: "meiryo.ttc"
    separator_color :  242/255 ,140/255,40/255,1
    title_align : "center"
    MDGridLayout:
        rows:1
        cols: 3
        padding : "20dp"
        MDRectangleFlatButton:
            text : "はい"
            font_size: " 12sp"
            size_hint : 1 , 0.5
            halign : "center"
            on_release :
                root.dismiss()
                root.btn()
        Widget:
        MDRectangleFlatButton:
            text : "いいえ"
            font_size: " 12sp"
            size_hint : 1 , 0.5
            halign : "center"
            on_release : root.dismiss()



<PracticeWindow>
    name : "practice"
    MDLabel :
        id : practice_label
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.40}
        halign: "center"
        size_hint_x :1
        text :"Under Construction"
        font_size : self.width/40

    Image :
        id : practice_image
        source : 'assets/two_leg.png'
        pos_hint :{"center_x" : 0.5, "center_y" : 0.6 }
        size_hint_x : 0.5
        size_hint_y  : 0.3
    MDRectangleFlatButton:
        text : "練習を終了"
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.25}
        on_release :Factory.PracticePopup().open()










    MDTopAppBar:
        font_size : "20sp"
        left_action_items: [['home', lambda x: root.home()]]


<AddressScreen>

    name : "address"
    FloatLayout:
        GridLayout:
            halign:"center"
            row_force_default :"True"
            row_default_height :"80"

            pos_hint:{"center_x" : 0.5 , "center_y" : 0.70}


            size_hint_y:0.2
            size_hint_x:0.8
            column:1
            rows:2


            MDTextField :
                id : ip
                text:"192.168.5.1"
                hint_text:"IP アドレス"
                required:True

                size_hint_x:1
                multiline : False
                helper_text :"e.g : 127.0.0.1"
                icon_left: 'key-variant'
                normal_color: app.theme_cls.accent_color
                color_active: 211/255, 211/255, 211/255, 1


        GridLayout:
            halign:"center"
            row_force_default :"True"
            row_default_height :"80"

            pos_hint:{"center_x" : 0.5 , "center_y" : 0.60}


            size_hint_y:0.2
            size_hint_x:0.8
            column:1
            rows:4
            MDLabel :
                font_size : self.width/28
                size_hint_x:1
                halign :"left"
                text : "接続ガイドライン。"
                underline :True
            MDLabel :
                font_size : self.width/28
                size_hint_x:1
                halign :"left"
                text : "1.Wifi設定を開いて「Raspi」と接続してください. パスワード：raspberrypi"
            MDLabel :
                font_size : self.width/30
                size_hint_x:1
                halign :"left"
                theme_text_color: "Custom"
                text_color: "red"
                text : "注意：「Raspi」と接続後、インターネット接続が使用できなくなりますご承知おきください　"
            MDLabel :
                font_size : self.width/30
                size_hint_x:1
                halign :"left"
                theme_text_color: "Custom"
                text_color: "red"
                text : "注意：他のデバイス接続中場合は接続が失敗する恐れがありますので、全デバイスとの接続を切ってから接続してください"




        MDRectangleFlatButton:
            pos_hint : {"center_x":0.5,"center_y":0.15}
            text : "Start"
            halign:"center"
            size_hint_x: 0.7
            on_release :
                root.connect()



    Overlay:
        id: dim_overlay
        opacity: 1 if root.ids.nav_drawer.state == "open" else 0
        on_touch_down: root.ids.nav_drawer.set_state("closed")

    MDTopAppBar:
        left_action_items: [['menu', lambda x: nav_drawer.set_state("open")]]
        anchor_title: "center"

    MDNavigationDrawer:
        id: nav_drawer
        BoxLayout:
            orientation: 'horizontal'



<MainWindow>:

    name : "main"
    FloatLayout:
        MDCard:
            orientation: 'vertical'
            pos_hint:{"center_x" : 0.5 , "center_y" :0.475}
            size_hint_y:0.85
            size_hint_x:0.8
            padding: "20dp"
            style:"elevated"
            adaptive_size: True
            GridLayout:
                halign:"center"

                row_default_height :self.height/10

                pos_hint:{"center_x" : 0.5 , "center_y" : 0.75}


                size_hint_y:0.2
                size_hint_x:0.8
                column:1
                rows:6

                MDLabel :

                    text : "年齢"
                    size_hint_x:1.0
                    halign:"left"
                    font_size : self.width/15
                    size_hint_y:0.15


                MDTextField :
                    id : age
                    text: "65"
                    multiline : False
                    hint_text:"必須"
                    helper_text: "16~95歳"
                    required: True
                    font_name : "meiryo.ttc"
                    size_hint_x:1.0
                    mode :"rectangle"

                Widget:
                    size_hint_x:1.0
                    size_hint_y:0.15

                MDLabel :
                    text : "身長"
                    bold : True
                    halign:"left"
                    font_size : self.width/15

                    size_hint_y:0.15
                    size_hint_x:1.0


                MDTextField :
                    id : ht
                    multiline : False
                    mode :"rectangle"
                    hint_text:"必須"
                    helper_text : "Max 2.00m"
                    text:"175"
                    size_hint_x:1.0
                    required: True


            GridLayout:
                rows:1
                column:6

                halign:"left"

                row_default_height :"50"

                pos_hint:{"center_x" : 0.5, "center_y" : 0.5}


                size_hint_y:0.2
                size_hint_x:0.8
                MDLabel:
                    text:"性別:"
                    font_size : self.width/3
                MDLabel:
                    text:"男性"
                    halign :"right"
                    font_size : self.width/3


                CheckBox:
                    id: male_gender
                    group: "gender"
                    active: False

                    size_hint : 0.30,0.04
                MDLabel:
                    text:"女性"
                    halign:"right"
                    font_size : self.width/3

                CheckBox:
                    id: female_gender
                    group: "gender"
                    active: False
                    size_hint : 0.30,0.040
                MDLabel:
                    text:"他の"
                    halign:"right"
                    font_size :self.width/3

                CheckBox:
                    id: other_gender
                    group: "gender"
                    active: False
                    size_hint : 0.30,0.035
            GridLayout
                rows:3
                column:1

                halign:"left"

                row_default_height :"50"
                padding : "20dp"
                pos_hint:{"center_x" : 0.5, "center_y" : 0.5}
                size_hint_y:0.1

                MDLabel :
                    id : error_label_main
                    text : ""
                    size_hint_x :1
                    theme_text_color: "Custom"
                    text_color: "red"
                    font_size : self.width/20
                MDRectangleFlatIconButton :
                    id : "practice_button"

                    text : "測定練習"
                    icon: "play"
                    size_hint_x:1.0
                    on_release :
                        root.practice_flag()
                        root.data_calculation()




                MDRectangleFlatIconButton :
                    id : "test_button"

                    text : "スタート"
                    icon: "play"
                    size_hint_x:1.0
                    on_release :
                        root.test_flag()
                        root.data_calculation()






    MDTopAppBar:
        font_size : "20sp"
        left_action_items: [['arrow-left', lambda x: root.back()]]

    Overlay:
        id: dim_overlay
        opacity: 1 if root.ids.nav_drawer.state == "open" else 0
        on_touch_down: root.ids.nav_drawer.set_state("closed")
    MDNavigationDrawer:
        id: nav_drawer
        BoxLayout:
            orientation: 'horizontal'



<TestWindow>:

    name : "test"



    MDLabel :
        id : test2_label
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.40}
        halign: "center"
        size_hint_x :1
        text :"Under Construction"
        font_size : self.width/40

    Image :
        id : test_image
        source : 'assets/two_leg.png'
        pos_hint :{"center_x" : 0.5, "center_y" : 0.6 }
        size_hint_x : 0.5
        size_hint_y  : 0.3
    MDRectangleFlatButton:
        text : "成功"
        pos_hint : {"center_x" : 0.25 , "center_y" : 0.25}
        on_release :
            root.passed()
            root.rating_func()
            root.next_screen_loading()
            root.next_screen_result()




    MDRectangleFlatButton :
        text : "失敗"
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.25}
        on_release :
            root.failed()
            root.rating_func()
            root.next_screen_loading()
            root.next_screen_result()


    MDRectangleFlatButton :
        text : "やり直し"
        pos_hint : {"center_x" : 0.75 , "center_y" : 0.25}
        on_release:
            root.retry()


    MDTopAppBar:
        font_size : "20sp"
        left_action_items: [['home', lambda x:root.home() ]]









<ResultWindow>:
    name : "result"
    MDFloatLayout:
        MDGridLayout:
            halign:"center"

            row_default_height :"70"

            pos_hint:{"center_x" : 0.5 , "center_y" : 0.85}


            size_hint_y:0.1
            size_hint_x:0.8
            column:1
            rows:1
            MDCard:
                fill_color: "red"
                orientation: "horizontal"
                padding:"20dp"
                MDLabel:
                    halign:"center"
                    text:"測定終了しました！ "
                    font_size:"24sp"
                    theme_text_color: "Custom"
                    text_color: "orange"


        MDGridLayout:
            halign:"center"

            row_default_height :"70"

            pos_hint:{"center_x" : 0.5 , "center_y" : 0.55}


            size_hint_y: 0.3
            size_hint_x:0.8
            column:1
            rows : 1
            MDCard:
                fill_color: "red"
                orientation: "horizontal"
                padding:"20dp"
                GridLayout:
                    halign:"center"

                    row_default_height :"20"

                    size_hint_x:0.8
                    column:1
                    rows : 3
                    MDLabel :
                        id:result_label_comment
                        text : "Comment"
                        halign: "center"
                        size_hint_x :0.8
                        font_size : self.width/20
                    MDLabel :
                        id:result_label_rage
                        halign: "center"
                        size_hint_x :0.8
                        text : ""
                        font_size : self.width/20
    GridLayout:
        halign:"center"

        row_default_height :"70"

        pos_hint:{"center_x" : 0.5 , "center_y" : 0.30}
        padding : "20dp"

        size_hint_y: 0.3
        size_hint_x:0.8
        column:7
        rows : 1
        Image :

            id : about
            source : 'assets/about_locomo.png'
            halign:"center"
            size_hint_x : 0.2
            size_hint_y  : 0.3
        Widget:
            size_hint_x : 0.05
            size_hint_y  : 0.3
        Image :
            id : miyazaki
            source : 'assets/miyazaki_locomo.png'
            halign:"center"
            size_hint_x : 0.2
            size_hint_y  : 0.3
        Widget:
            size_hint_x : 0.05
            size_hint_y  : 0.3
        Image :
            id : supp
            source : 'assets/miyazaki_support.png'
            halign:"center"
            size_hint_x : 0.2
            size_hint_y  : 0.3

        Widget:
            size_hint_x : 0.05
            size_hint_y  : 0.3
        Image :
            id : nearby
            source : 'assets/nearby_locomo.png'
            halign:"center"
            size_hint_x : 0.2
            size_hint_y  : 0.3



    GridLayout:
        halign:"center"

        row_default_height :"70"

        pos_hint:{"center_x" : 0.5 , "center_y" : 0.20}

        padding : "20dp"
        size_hint_y: 0.3
        size_hint_x:0.8
        column:7
        rows : 1
        MDLabel :
            id : about
            text: "[u][ref=some]ロコモについて[/ref][/u]"
            halign:"center"
            size_hint_x : 0.2
            size_hint_y  : 0.3
            font_size:self.width/5
            markup: True
            on_ref_press:
                import webbrowser
                webbrowser.open('https://locomo-joa.jp/check/test/')
        Widget:
            size_hint_x : 0.05
            size_hint_y  : 0.3
        MDLabel :
            id : miyazaki
            text:  "[u][ref=some]宮崎市のロコモ検診[/ref][/u]"
            halign:"center"
            font_size:self.width/5
            size_hint_x : 0.2
            size_hint_y  : 0.3
            markup: True
            on_ref_press:
                import webbrowser

                webbrowser.open('http://www.med.miyazaki-u.ac.jp/home/kenspo/action/')

        Widget:
            size_hint_x : 0.05
            size_hint_y  : 0.3
        MDLabel :
            id : supp
            text: "[u][ref=some]宮崎県健康長寿サポートサイト[/ref][/u]"
            halign:"center"
            font_size:self.width/8
            size_hint_x : 0.2
            size_hint_y  : 0.3
            markup: True
            on_ref_press:
                import webbrowser
                webbrowser.open('https://kenkochoju.pref.miyazaki.lg.jp/cat_youtube/4025/')

        Widget:
            size_hint_x : 0.05
            size_hint_y  : 0.3
        MDLabel :
            id : nearby
            text: "[u][ref=some]近くのロコモ外来病院[/ref][/u]"
            halign:"center"
            size_hint_x : 0.2
            size_hint_y  : 0.3
            font_size:self.width/5
            markup: True
            on_ref_press:
                import webbrowser
                webbrowser.open('kyouwahp.jp/cont7/37.html')









    MDRectangleFlatButton :
        text : "測定終了"
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.10}
        on_release :
            app.root.current = "main"
            root.manager.transition.direction = "up"
    Overlay:
        id: dim_overlay
        opacity: 1 if root.ids.nav_drawer.state == "open" else 0
        on_touch_down: root.ids.nav_drawer.set_state("closed")

    MDTopAppBar:
        left_action_items: [['menu', lambda x: nav_drawer.set_state("open")]]
    MDNavigationDrawer:
        id: nav_drawer
        BoxLayout:
            orientation: 'horizontal'


<TitleWindow>:

    name : "title"
    FloatLayout:
        MDLabel :
            id:title_label
            text : "ロコモ年齢自動測定システムの利用について"
            font_size : self.width/20
            size_hint_x : 0.8
            halign : "center"
            underline : True
            pos_hint : {"center_x" : 0.5 , "center_y" : 0.85}
        MDGridLayout:
            halign:"center"




            pos_hint:{"center_x" : 0.5 , "center_y" : 0.75}


            size_hint_y:0.8
            size_hint_x:0.8
            column:1
            rows:3

            Widget:
                size_hint_y:0.8
                size_hint_x: None

            MDCard:
                orientation: 'vertical'
                pos_hint:{"center_x" : 0.5 , "center_y" : 1.0}
                size_hint_y : 1.0
                padding: "10dp"
                style:"elevated"
                adaptive_style: True







                MDLabel :
                    text : "\u2022　測定結果とコメントについてこのロコモ年年齢測定システムは立ち上がり能力からあなたの基礎移動能力の現状と年齢に伴う衰退の傾向の予測を行います. "
                    font_size : self.width/28
                    halign :"left"
                MDLabel :
                    text : "\u2022　測定結果には個人によって誤差があり，その評価やコメントは今後の基礎能力維持のための参考としてご認識いただけますようお願いします.\n  "

                    font_size : self.width/28
                    halign :"left"
                MDLabel :
                    text : " \u2022　測定中の事故について本測定システムは安全性の面において，できる限りの工夫を行い，市販の電動症候椅子の安全基準を持しておりますが，被測者の基礎運動機能の低下や無理な立上がり等による転倒の恐れがあります．\n"
                    font_size : self.width/28

                    halign :"left"
                MDLabel :
                    text : "\u2022　万が一，転倒による怪我が生じた場合，研究開発側は一切の責任を負いかねますのであらかじめご了承ください. "
                    font_size : self.width/28

                    halign :"left"





        MDRectangleFlatButton :
            text : "承知しました"
            pos_hint : {"center_x" : 0.5 , "center_y" : 0.20}
            size_hint : 0.3,0.05
            ripple_behaviour :True

            on_release :
                app.root.current = "main"
                root.manager.transition.direction = "left"





    MDTopAppBar:
        use_overflow: True
        left_action_items: [['cog', lambda x: root.start_maintenance()]]
        right_action_items:[['power', lambda x: app.turn_off()],['information', lambda x: root.info()]]


    Overlay:
        id: dim_overlay
        opacity: 1 if root.ids.nav_drawer.state == "open" else 0
        on_touch_down: root.ids.nav_drawer.set_state("closed")
    MDNavigationDrawer:
        id: nav_drawer
        BoxLayout:
            orientation: 'horizontal'
<LoadingWindow>:
    name : "loading"
    MDFloatLayout:
        md_bg_color : 0,0,0,0
        MDGridLayout:
            id :loading
            angle : 0
            rows:2
            cols:2
            size_hint: None,None
            height:100
            width:100
            pos_hint:{"center_x":.5,"center_y":.6}
            spacing:5
            canvas.before:
                PushMatrix
                Rotate:
                    angle : self.angle
                    axis:0,0,1
                    origin: self.center
            canvas.after:
                PopMatrix
            MDFloatLayout:
                md_bg_color:rgba(242,80,34,255)
            MDFloatLayout:
                md_bg_color:rgba(242,80,34,255)
            MDFloatLayout:
                md_bg_color:rgba(242,80,34,255)
            MDFloatLayout:
                md_bg_color:rgba(242,80,34,255)





    MDLabel :
        id:loading_label
        text : "座面高さ調整中.\n座ったまままで待ってください."
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.4}
        halign :"center"
        size_hint_x :1
        font_size : "25sp"



    MDRectangleFlatIconButton :

        id : load_button
        icon:"arrow-right"
        text : "Proceed"
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.25}
        disabled : True
        on_release :
            root.disable_load_button()
            root.switch()

    MDTopAppBar:
        left_action_items: [['home', lambda x: root.popup_parent()]]


<ConnectionWindow>

    name : "connect"
    MDLabel :
        id:connect_label
        text : "サーバーとの接続が切断されています.\n接続状況を確認してください"
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.5}
        halign : "center"
        size_hint_x : 0.8
        font_size : self.width/25
    MDRectangleFlatButton :
        id : connect_return
        text : "戻る"
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.25}
        disabled : False
        on_release :
            root.top()


<MaintenanceWindow>
    name : "maintenance"
    FloatLayout:

        MDLabel :
            id: maintenance_title
            font_size : self.width/18
            text : "メンテナンス画面"
            underline : True
            pos_hint : {"center_x": 0.5,"center_y": 0.9}
            halign :"center"
            size_hint_x :1


        GridLayout:
            halign:"center"
            row_force_default :"True"
            row_default_height :"80"

            pos_hint:{"center_x" : 0.5 , "center_y" : 0.75}
            rows: 2
            column:1
            size_hint_y:0.2
            size_hint_x:0.8


            MDLabel :

                text : "1)手動で座面高さを10㎝に合わせる"
                rows:1
                font_size : self.width/25


            MDLabel :
                id : test1

                text : "現在の座面高さ＿＿㎝"
                font_size : self.width/25
        GridLayout:
            rows:1
            column:1
            pos_hint:{"center_x" : 0.5 , "center_y" : 0.65}
            size_hint_y : 0.05
            size_hint_x: 0.8
            MDRectangleFlatButton :
                id : maintenance_button_1
                font_size : '18sp'
                size_hint_x:1.0
                size_hint_y:0.2
                text : "測定開始"

                disabled : False
                on_release:

                    root.test_1()




        GridLayout:
            halign:"center"
            row_force_default :"True"
            row_default_height :"80"

            pos_hint:{"center_x" : 0.5 , "center_y" : 0.50}
            rows: 2
            column:1
            size_hint_y:0.2
            size_hint_x:0.8


            MDLabel :

                text : "2)手動で座面高さを30㎝に合わせる"
                rows:1
                font_size : self.width/25


            MDLabel :
                id : test2

                text : "現在の座面高さ＿＿㎝"
                font_size : self.width/25
        GridLayout:
            rows:1
            column:1
            pos_hint:{"center_x" : 0.5 , "center_y" : 0.40}
            size_hint_y : 0.05
            size_hint_x: 0.8
            MDRectangleFlatButton :
                id : maintenance_button_2
                font_size : '18sp'
                size_hint_x:1.0
                size_hint_y:0.2
                text : "測定開始"

                disabled : True
                on_release:
                    root.test_2()






        GridLayout:
            halign:"center"
            row_force_default :"True"
            row_default_height :"80"

            pos_hint:{"center_x" : 0.5 , "center_y" : 0.25}
            rows: 2
            column:1
            size_hint_y:0.2
            size_hint_x:0.8


            MDLabel :

                text : "2)手動で座面高さを50㎝に合わせる"
                rows:1
                font_size : self.width/25


            MDLabel :
                id : test3

                text : "現在の座面高さ＿＿㎝"
                font_size : self.width/25


        MDRectangleFlatButton :
            id : maintenance_button_3
            font_size : '18sp'
            size_hint_x: 0.8
            size_hint_y : 0.05
            text : "測定開始"
            pos_hint : {"center_x" : 0.5 , "center_y" : 0.15}
            disabled : True
            on_release:
                root.test_3()


        MDRectangleFlatIconButton :
            id : maintenance_end

            font_size : '18sp'
            mode:"round"
            size_hint :0.5 ,0.035
            fill_color: "white"
            text : "終了"
            pos_hint : {"center_x":0.5,"center_y" : 0.08}
            disabled : True
            halign :"center"
            on_release:
                root.test_end()
        MDTopAppBar:

            left_action_items: [['arrow-left', lambda x: root.back()]]

<ExplanationWindow>

    name : "explain"
    MDFloatLayout:
        MDLabel :
            id:title_label
            text : "測定姿勢と立上がり動作の説明"
            font_size : '24sp'
            underline : True
            pos_hint : {"center_x" : 0.5 , "center_y" : 0.9}
            size_hint_x : 1
            halign :"center"
        MDGridLayout:
            halign:"center"



            pos_hint:{"center_x" : 0.5 , "center_y" : 0.5}


            size_hint_y:0.65
            size_hint_x:0.8
            column:1
            rows:1



            MDCard:
                orientation: 'vertical'
                pos_hint:{"center_x" : 0.5 , "center_y" : 1.0}
                size_hint_y : 1.0
                padding: "20dp"
                style:"elevated"
                adaptive_style: True


                MDLabel :
                    text : "\u2022上がり姿勢： \n立上がりは右の絵のような姿勢で，背中を背もたれに当てて，両手を胸の前に組み，両足または片足で行います．片足の場合は右足と左足のどちらでも良いです.踵は立ち上がりしやすいように，後ろに引いて置いてください．脛と地面の角度は約70°となります\n    "
                    font_size : self.width/28
                    halign :"left"
                MDLabel :
                    text : "\u2022立上がり動作： \n無理なく，ゆっくり立上がり，そのままを３秒程度維持してください．その後椅子に座り，結果を選んでください "
                    font_size : self.width/28

                    halign :"left"
                MDLabel :
                    text : "\u2022立上がり結果： \n 立ち上がりの結果はご自分で判断し，画面の「成功」または「失敗」のボターンをクリックしてください． 「やり直し」をクリックした場合，１回の直しはできます．\n"
                    font_size : self.width/28

                    halign :"left"
                MDLabel :
                    text : "\u2022座面高さ調整： \n座面高さは測定結果に応じて自動調整します．座ったままで画面に指示に従ってください． "
                    font_size : self.width/28

                    halign :"left"
    MDTopAppBar:

        left_action_items: [['arrow-left', lambda x: root.back()]]




    MDRectangleFlatButton :
        text : "承知しました。測定開始"
        pos_hint : {"center_x" : 0.5 , "center_y" : 0.1}
        size_hint : 0.3,0.05

        on_release :
            app.root.current = "main"
            root.manager.transition.direction = "left"


    MDTopAppBar:

        left_action_items: [['arrow-left', lambda x: root.back()]]
